<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AI Response to PDF</title>
    <link rel="icon" href="favicon.ico" type="image/x-icon"> <!-- Link to your favicon file -->

    <!-- Meta Tags for SEO and Social Media Sharing -->
    <meta name="description" content="Store Share ChatGPT response (formulaes, tables, code) to PDF">
    <meta name="keywords" content="ChatGPT, PDF, preview, response, markdown, LaTeX, math rendering, syntax highlighting, print preview">
    <meta name="author" content="Your Name or Company">
    
    <!-- Open Graph Meta Tags (For Facebook, LinkedIn, etc.) -->
    <meta property="og:title" content="ChatGPT Response to PDF">
    <meta property="og:description" content="Store Share ChatGPT response (formulaes, tables, code) to PDF">
    <meta property="og:image" content="ff.png"> <!-- Replace with a valid image URL for social sharing -->
    <meta property="og:url" content="URL-of-your-page"> <!-- Replace with the actual URL of your page -->
    <meta property="og:type" content="website">

    <!-- Twitter Card Meta Tags -->
    <meta name="twitter:title" content="ChatGPT Response to PDF">
    <meta name="twitter:description" content="Store Share ChatGPT response (formulaes, tables, code) to PDF">
    <meta name="twitter:image" content="ff.png"> <!-- Replace with a valid image URL for Twitter -->
    <meta name="twitter:card" content="summary_large_image">

    <script>
        window.MathJax = {
            tex: {
                inlineMath: [['\\(', '\\)']],
                displayMath: [['\\[', '\\]']]
            },
            options: {
                skipHtmlTags: ['script', 'noscript', 'style', 'textarea', 'pre']
            }
        };
    </script>
    <script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script> <!-- Include marked.js -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>

    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 0;
            padding: 0;
            display: flex;
            height: 100vh;
            background-color: #212121;
            color: #e0e0e0;
            flex-direction: column;
        }

        .container {
            display: flex;
            width: 100%;
            height: 100%;
            position: relative;
            margin: 0;
        }

        .editor-container, .preview-container {
            display: flex;
            flex-direction: column;
            padding: 10px 0px ;
            box-sizing: border-box;
            overflow-y: auto;
        }

        .editor-container {
            padding-left:5px;
            background-color: #333;
            color: #e0e0e0;
        }

        .preview-container {
            padding:5px 20px;
            
            background-color: #222;
            color: #e0e0e0;
            flex: 2;
        }

        textarea {
            flex: 1;
            width: 99%;
            font-size: 16px;
            padding: 0px;
            background-color: #333;
            color: #e0e0e0;
            border: 1px solid #444;
            resize: none;
        }

        .resize-bar {
            width: 10px;
            cursor: ew-resize;
            background-color: #444;
            position: absolute;
            /* left: 50%; */
            top: 0;
            height: 100%;
        }

        .resize-bar:hover {
            background-color: #ff9d00;
        }

        .preview-container {
            flex-grow: 1;
        }

        .editor-container {
            flex-grow: 1;
        }

        /* Styles for code preview and math rendering */
        pre {
            background-color: #2c2c2c !important;
            
            border-radius: 5px;
            font-size: 14px;
            line-height: 1.4;
            overflow: visible !important;
            color: #e0e0e0;
        }

        code {
            font-family: "Courier New", Courier, monospace !important;
            color: #ffffff !important;
            text-shadow: none !important;
        }

        .token.operator, .token.url {
            color: #d08113;
        }

        .token.keyword {
            color: #ff9d00;
        }

        table {
            width: 100%;
            border-collapse: collapse;
            border: 1px solid #ffffff;
        }

        th, td {
            padding: 10px;
            text-align: left;
            border: 1px solid #ffffff;
        }

        th {
            background-color: #383838;
            color: #ffffff;
        }

        tr:nth-child(even) {
            background-color: #333;
        }

        tr:hover {
            background-color: #444;
        }

        .math {
            color: #ff9d00;
        }
    </style>
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css">

</head>
<body>
    <div class="container">
        <div class="editor-container">
            <textarea id="response-input" placeholder="Paste ChatGPT response here..."></textarea>
        </div>

        <div class="resize-bar" id="resize-bar"></div>

        <div class="preview-container" id="preview-output">
            <!-- Preview will appear here -->
        </div>
    </div>

    <button onclick="printPreview()" style="position: absolute; top: 10px; right: 10px; background-color: #ff9d00; color: #181818; padding: 10px 15px; border: none; font-size: 16px; cursor: pointer;border-radius: 6px;">
        Print
    </button>

    <script>
        const inputElement = document.getElementById('response-input');
        const preview = document.getElementById('preview-output');
        const resizeBar = document.getElementById('resize-bar');
        const container = document.querySelector('.container');

        let isResizing = false;

        inputElement.addEventListener('input', () => generatePreview());

        function generatePreview() {
            let input = inputElement.value;
            console.log(input);
            input = input.replace(/\\([\\\[\](){}^_])/g, '\\\\$1');
            preview.innerHTML = '';
            if (input.trim() === '') {
                preview.innerHTML = 'Please paste a ChatGPT response to preview.';
                return;
            }
            let htmlContent = marked.parse(input);
            console.log(htmlContent);
            preview.innerHTML = htmlContent;
            MathJax.typesetPromise([preview]).catch((err) => console.log(err));
            Prism.highlightAll();
        }

        resizeBar.addEventListener('mousedown', (e) => {
            isResizing = true;
            document.addEventListener('mousemove', handleMouseMove);
            document.addEventListener('mouseup', () => {
                isResizing = false;
                document.removeEventListener('mousemove', handleMouseMove);
            });
        });

        function handleMouseMove(e) {
            if (isResizing) {
                const containerRect = container.getBoundingClientRect();
                const newWidth = e.clientX - containerRect.left;
                const minWidth = 100;
                const maxWidth = containerRect.width - minWidth;

                if (newWidth >= minWidth && newWidth <= maxWidth) {
                    const editorWidth = newWidth;
                    const previewWidth = containerRect.width - newWidth - resizeBar.offsetWidth;

                    document.querySelector('.editor-container').style.flex = `0 0 ${editorWidth}px`;
                    document.querySelector('.preview-container').style.flex = `0 0 ${previewWidth}px`;
                    resizeBar.style.left = `${newWidth}px`;

                }
            }
        }   

        const containerRect = container.getBoundingClientRect();
        const initialWidth = containerRect.width / 2.2;
        document.querySelector('.editor-container').style.flex = `0 0 ${initialWidth}px`;
        document.querySelector('.resize-bar').style.left = `${initialWidth}px`;


        // document.querySelector('.preview-container').style.flex = `0 0 ${initialWidth}px`;

        function printPreview() {
            const printWindow = window.open('', '', 'height=600,width=800');
            const previewContent = document.getElementById('preview-output').innerHTML;

            printWindow.document.write('<html><head><title>Print Preview</title>');
            printWindow.document.write(`
                <style>
                    body {
                        font-family: Arial, sans-serif;
                        color: black;
                        background-color: white;
                        margin: 20px;
                    }
                    table, th, td {
                        border: 1px solid black;
                        border-collapse: collapse;
                    }
                    th, td {
                        padding: 8px;
                        text-align: left;
                    }
                    pre {
                        background-color: #f4f4f4;
                        padding: 10px;
                        border: 1px solid #ccc;
                        font-size: 14px;
                        color: #333;
                        white-space: pre-wrap;
                        word-wrap: break-word;
                    }
                    code {
                        font-family: "Courier New", Courier, monospace;
                        color: black;
                    }
                </style>
            `);
            printWindow.document.write('</head><body>');
            printWindow.document.write(previewContent);
            printWindow.document.write('</body></html>');

            printWindow.document.close();
            printWindow.print();
        }
    </script>
</body>
</html>
